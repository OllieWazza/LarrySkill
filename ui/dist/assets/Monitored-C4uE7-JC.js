import{r as a,al as e,aB as l,ay as v,aG as b,aF as g,aN as w,aM as k}from"./index-C1dXcKKh.js";function A(){const[n,o]=a.useState([]),[c,i]=a.useState(""),[d,m]=a.useState(!1),[x,p]=a.useState(!1),[y,h]=a.useState(!0);a.useEffect(()=>{fetch("/api/monitored").then(s=>s.json()).then(s=>{o(s.accounts||[]),h(!1)}).catch(()=>h(!1))},[]);const u=async()=>{const s=c.replace("@","").trim();if(s){m(!0);try{const t=await(await fetch("/api/monitored",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({handle:s,action:"add"})})).json();o(t.accounts||[]),i("")}catch{}m(!1)}},f=async s=>{try{const t=await(await fetch("/api/monitored",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({handle:s,action:"remove"})})).json();o(t.accounts||[])}catch{}},j=async()=>{p(!0);try{const r=await(await fetch("/api/monitored/refresh")).json();o(r.accounts||[])}catch{}p(!1)};return e.jsxs("div",{className:"p-6 space-y-5 w-full",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-xl font-bold flex items-center gap-2",children:[e.jsx(l,{className:"w-5 h-5",style:{color:"var(--color-primary)"}}),"Monitored Accounts"]}),e.jsx("p",{className:"text-[12px] mt-0.5",style:{color:"var(--color-text-muted)"},children:"Track top creators in your niche and see their latest tweets"})]}),e.jsxs("button",{onClick:j,disabled:x,className:"flex items-center gap-1.5 text-[12px] hover:opacity-80 transition-opacity disabled:opacity-40",style:{color:"var(--color-primary)"},children:[e.jsx(v,{className:`w-3.5 h-3.5 ${x?"animate-spin":""}`}),"Refresh All"]})]}),e.jsxs("div",{className:"card p-4",children:[e.jsx("p",{className:"text-[12px] font-medium mb-3",style:{color:"var(--color-text-secondary)"},children:"Add account to monitor"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{value:c,onChange:s=>i(s.target.value),onKeyDown:s=>s.key==="Enter"&&u(),placeholder:"@handle",className:"flex-1 px-3 py-2.5 rounded-lg text-[13px] border",style:{background:"var(--color-bg)",borderColor:"var(--color-border-subtle)",color:"var(--color-text)"}}),e.jsxs("button",{onClick:u,disabled:d||!c.trim(),className:"px-4 py-2.5 text-[13px] rounded-lg disabled:opacity-40 font-medium flex items-center gap-1.5 bg-gradient-to-r from-primary to-accent text-white hover:opacity-90 transition-opacity",children:[d?e.jsx("div",{className:"animate-spin rounded-full h-3.5 w-3.5 border-2 border-white border-t-transparent"}):e.jsx(b,{className:"w-3.5 h-3.5"}),"Add"]})]})]}),y?e.jsx("div",{className:"space-y-3",children:[1,2].map(s=>e.jsxs("div",{className:"card p-5 animate-pulse space-y-3",children:[e.jsx("div",{className:"h-4 rounded-full w-24",style:{background:"var(--color-border-subtle)"}}),e.jsx("div",{className:"h-3 rounded-full w-3/4",style:{background:"var(--color-border-subtle)"}})]},s))}):n.length>0?e.jsx("div",{className:"space-y-4",children:n.map((s,r)=>e.jsxs("div",{className:"card p-5",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("a",{href:`https://x.com/${s.handle}`,target:"_blank",rel:"noopener",className:"text-[14px] font-semibold hover:opacity-80 transition-opacity",style:{color:"var(--color-primary)"},children:["@",s.handle]}),e.jsx("button",{onClick:()=>f(s.handle),className:"hover:opacity-70 transition-opacity text-danger",children:e.jsx(g,{className:"w-3.5 h-3.5"})})]}),s.tweets?.length>0?e.jsx("div",{className:"space-y-2",children:s.tweets.slice(0,3).map((t,N)=>e.jsxs("div",{className:"p-3 rounded-lg",style:{background:"var(--color-bg-secondary)"},children:[e.jsx("p",{className:"text-[13px] line-clamp-2 mb-2",children:t.text}),e.jsxs("div",{className:"flex items-center gap-4 text-[11px]",style:{color:"var(--color-text-muted)"},children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(l,{className:"w-3 h-3"})," ",t.impressions?.toLocaleString()||0]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(w,{className:"w-3 h-3"})," ",t.likes?.toLocaleString()||0]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(k,{className:"w-3 h-3"})," ",t.retweets?.toLocaleString()||0]})]})]},N))}):e.jsx("p",{className:"text-[12px] italic",style:{color:"var(--color-text-muted)"},children:"No tweets cached â€” hit Refresh All"})]},r))}):e.jsxs("div",{className:"card p-10 text-center",children:[e.jsx(l,{className:"w-8 h-8 mx-auto mb-3",style:{color:"var(--color-text-muted)"}}),e.jsx("p",{className:"text-[14px] font-medium mb-1",children:"No accounts monitored yet"}),e.jsx("p",{className:"text-[12px]",style:{color:"var(--color-text-muted)"},children:"Add @handles above to track what's working in your niche"})]})]})}export{A as default};
