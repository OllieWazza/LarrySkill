import{ax as q,r as t,al as e,aP as E,as as M,aC as D,az as Q,aL as z,aM as G,aN as K,aO as X}from"./index-C1dXcKKh.js";import{C as w}from"./chevron-down-CkAMlpbj.js";import{C as Y}from"./chart-no-axes-column-CQpA40GD.js";import{C as J}from"./chevron-right-BL1MmJDc.js";const W=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],Z=q("funnel",W);function m(s){return!s&&s!==0?"—":s>=1e6?(s/1e6).toFixed(1)+"M":s>=1e3?(s/1e3).toFixed(1)+"K":String(s)}function ee({tweet:s}){const y=Q(),[l,b]=t.useState(!1),c=200,v=s.text?.length>c,n=s.author?.name||"Unknown",p=s.author?.username||s.author||"unknown";return e.jsxs("div",{className:"card p-4 transition-all duration-200",style:{breakInside:"avoid",marginBottom:"1rem"},onMouseEnter:a=>{a.currentTarget.style.transform="translateY(-2px)",a.currentTarget.style.boxShadow="0 8px 24px oklch(0 0 0 / 0.3)"},onMouseLeave:a=>{a.currentTarget.style.transform="",a.currentTarget.style.boxShadow=""},children:[e.jsxs("div",{className:"flex items-center gap-2.5 mb-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-full flex items-center justify-center text-[12px] font-bold shrink-0",style:{background:`linear-gradient(135deg, oklch(0.65 0.19 ${(p.charCodeAt(0)||0)%360} / 0.3), oklch(0.65 0.18 ${((p.charCodeAt(0)||0)+60)%360} / 0.3))`,color:"var(--color-primary)"},children:n[0]?.toUpperCase()||"?"}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("p",{className:"text-[13px] font-semibold truncate",children:n}),e.jsxs("p",{className:"text-[11px]",style:{color:"var(--color-text-muted)"},children:["@",p," · ",s.date||s.timeAgo||""]})]}),(s.author?.followers||0)>1e4&&e.jsxs("span",{className:"text-[10px] px-1.5 py-0.5 rounded-full shrink-0 font-medium",style:{background:"oklch(0.65 0.19 250 / 0.1)",color:"var(--color-primary)"},children:[m(s.author.followers)," followers"]})]}),e.jsxs("p",{className:"text-[13px] leading-relaxed mb-3",style:{color:"var(--color-text-secondary)"},children:[v&&!l?s.text.slice(0,c)+"… ":s.text,v&&e.jsx("button",{onClick:a=>{a.stopPropagation(),b(!l)},className:"font-medium hover:opacity-80 transition-opacity",style:{color:"var(--color-primary)"},children:l?" Show less":"More >>"})]}),e.jsxs("div",{className:"flex items-center gap-3 text-[11px] mb-3",style:{color:"var(--color-text-muted)"},children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(z,{className:"w-3 h-3"}),m(s.replies)]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(G,{className:"w-3 h-3"}),m(s.retweets)]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(K,{className:"w-3 h-3"}),m(s.likes)]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(X,{className:"w-3 h-3"}),m(s.bookmarks)]}),e.jsxs("span",{className:"flex items-center gap-1 ml-auto",children:[e.jsx(Y,{className:"w-3 h-3"}),m(s.impressions)]})]}),e.jsxs("button",{onClick:()=>y("/writer",{state:{prefill:s.text}}),className:"flex items-center gap-1 text-[12px] font-medium hover:opacity-80 transition-opacity",style:{color:"var(--color-primary)"},children:["Use as inspiration ",e.jsx(J,{className:"w-3.5 h-3.5"})]})]})}const I={all:"All time",year:"Past year",month:"Past month",week:"Past week"},re={all:"All accounts",monitored:"Monitored only"};function ce(){const[s,y]=t.useState(""),[l,b]=t.useState([]),[c,v]=t.useState(!1),[n,p]=t.useState(null),[a,T]=t.useState([]),[i,P]=t.useState("all"),[d,R]=t.useState("all"),[x,k]=t.useState(100),[_,F]=t.useState(""),[u,U]=t.useState(!1),[C,B]=t.useState(!1),[S,O]=t.useState(!1);t.useEffect(()=>{fetch("/api/config").then(r=>r.json()).then(r=>{const o=r.interests||[];T(o),o.length>0&&h(o[0],"all","all",100)}).catch(()=>{})},[]);const h=async(r,o=i,A=d,g=x)=>{const L=r?.trim();if(L){v(!0),p(null),O(!0);try{const j=new URLSearchParams({q:L,period:o,minLikes:g,account:A,...C?{includeReplies:"1"}:{}}),N=await(await fetch(`/api/viral?${j}`)).json();if(N.error)throw new Error(N.error);b(N.tweets||[])}catch(j){p(j.message||"Failed to load viral tweets"),b([])}v(!1)}},f=()=>h(s||a[0]||"AI",i,d,x),H=r=>{y(r),h(r,i,d,x)},V=r=>{P(r),h(s||a[0]||"AI",r,d,x)},$=r=>{R(r),h(s||a[0]||"AI",i,r,x)};return e.jsxs("div",{className:"p-6 space-y-5 w-full",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-xl font-bold flex items-center gap-2",children:[e.jsx(E,{className:"w-5 h-5",style:{color:"var(--color-primary)"}}),"Viral Library"]}),e.jsx("p",{className:"text-[12px] mt-1",style:{color:"var(--color-text-muted)"},children:"Search and discover high-performing viral posts by keyword."})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(M,{className:"w-4 h-4 absolute left-3 top-1/2 -translate-y-1/2 pointer-events-none",style:{color:"var(--color-text-muted)"}}),e.jsx("input",{type:"text",value:s,onChange:r=>y(r.target.value),onKeyDown:r=>r.key==="Enter"&&f(),placeholder:"Search viral tweets by keyword…",className:"w-full pl-9 pr-4 py-2.5 rounded-xl text-[13px] border",style:{background:"var(--color-surface)",borderColor:"var(--color-border-subtle)",color:"var(--color-text)"}})]}),e.jsx("button",{onClick:f,className:"px-5 py-2.5 rounded-xl text-[13px] font-semibold bg-gradient-to-r from-primary to-accent text-white hover:opacity-90 transition-opacity",children:"Search"})]}),e.jsxs("div",{className:"flex items-center gap-3 flex-wrap",children:[e.jsxs("div",{className:"relative",children:[e.jsx("select",{value:i,onChange:r=>V(r.target.value),className:"appearance-none pl-3 pr-8 py-1.5 rounded-lg text-[12px] border cursor-pointer",style:{background:"var(--color-surface)",borderColor:"var(--color-border-subtle)",color:"var(--color-text-secondary)"},children:Object.entries(I).map(([r,o])=>e.jsx("option",{value:r,children:o},r))}),e.jsx(w,{className:"w-3 h-3 absolute right-2.5 top-1/2 -translate-y-1/2 pointer-events-none",style:{color:"var(--color-text-muted)"}})]}),e.jsxs("div",{className:"relative",children:[e.jsx("select",{value:d,onChange:r=>$(r.target.value),className:"appearance-none pl-3 pr-8 py-1.5 rounded-lg text-[12px] border cursor-pointer",style:{background:"var(--color-surface)",borderColor:"var(--color-border-subtle)",color:"var(--color-text-secondary)"},children:Object.entries(re).map(([r,o])=>e.jsx("option",{value:r,children:o},r))}),e.jsx(w,{className:"w-3 h-3 absolute right-2.5 top-1/2 -translate-y-1/2 pointer-events-none",style:{color:"var(--color-text-muted)"}})]}),e.jsxs("button",{onClick:()=>U(!u),className:"flex items-center gap-1.5 px-3 py-1.5 rounded-lg text-[12px] border hover:opacity-80 transition-all",style:{borderColor:u?"var(--color-primary)":"var(--color-border-subtle)",color:u?"var(--color-primary)":"var(--color-text-muted)",background:u?"oklch(0.65 0.19 250 / 0.08)":"transparent"},children:[e.jsx(Z,{className:"w-3 h-3"}),"Advanced Filters",u?e.jsx(D,{className:"w-3 h-3"}):e.jsx(w,{className:"w-3 h-3"})]})]}),u&&e.jsx("div",{className:"card p-4",children:e.jsxs("div",{className:"flex items-center gap-6 flex-wrap",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("label",{className:"text-[12px]",style:{color:"var(--color-text-muted)"},children:"Min likes"}),e.jsx("input",{type:"number",value:x,onChange:r=>k(Number(r.target.value)),min:0,className:"w-20 px-2 py-1 rounded-lg text-[12px] border text-center",style:{background:"var(--color-bg-secondary)",borderColor:"var(--color-border-subtle)",color:"var(--color-text)"}})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("label",{className:"text-[12px]",style:{color:"var(--color-text-muted)"},children:"Min views"}),e.jsx("input",{type:"number",value:_,onChange:r=>F(r.target.value),placeholder:"Any",className:"w-24 px-2 py-1 rounded-lg text-[12px] border text-center",style:{background:"var(--color-bg-secondary)",borderColor:"var(--color-border-subtle)",color:"var(--color-text)"}})]}),e.jsxs("label",{className:"flex items-center gap-2 text-[12px] cursor-pointer",style:{color:"var(--color-text-muted)"},children:[e.jsx("input",{type:"checkbox",checked:C,onChange:r=>B(r.target.checked),className:"rounded",style:{accentColor:"var(--color-primary)"}}),"Include replies"]}),e.jsx("button",{onClick:f,className:"px-3 py-1.5 rounded-lg text-[12px] font-medium bg-gradient-to-r from-primary to-accent text-white hover:opacity-90 transition-opacity",children:"Apply"})]})}),a.length>0&&e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] uppercase tracking-wider font-semibold mb-2",style:{color:"var(--color-text-muted)"},children:"Quick filters"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:a.slice(0,10).map(r=>e.jsx("button",{onClick:()=>H(r),className:"px-3 py-1.5 rounded-full text-[12px] font-medium transition-all border",style:{background:s===r?"oklch(0.65 0.19 250 / 0.12)":"transparent",borderColor:s===r?"var(--color-primary)":"var(--color-border-subtle)",color:s===r?"var(--color-primary)":"var(--color-text-secondary)"},children:r},r))})]}),!c&&l.length>0&&e.jsxs("p",{className:"text-[11px]",style:{color:"var(--color-text-muted)"},children:["Showing tweets with ",m(x),"+ likes · ",l.length," results",i!=="all"&&` · ${I[i]?.toLowerCase()}`,d==="monitored"&&" · monitored accounts only"]}),c&&e.jsx("div",{style:{columnCount:3,columnGap:"1rem"},children:[...Array(6)].map((r,o)=>e.jsxs("div",{className:"card p-4 animate-pulse",style:{breakInside:"avoid",marginBottom:"1rem"},children:[e.jsxs("div",{className:"flex items-center gap-2.5 mb-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-full",style:{background:"var(--color-border-subtle)"}}),e.jsxs("div",{className:"space-y-1 flex-1",children:[e.jsx("div",{className:"h-2.5 rounded-full w-24",style:{background:"var(--color-border-subtle)"}}),e.jsx("div",{className:"h-2 rounded-full w-16",style:{background:"var(--color-border-subtle)"}})]})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsx("div",{className:"h-2.5 rounded-full",style:{background:"var(--color-border-subtle)"}}),e.jsx("div",{className:"h-2.5 rounded-full w-5/6",style:{background:"var(--color-border-subtle)"}}),e.jsx("div",{className:"h-2.5 rounded-full w-2/3",style:{background:"var(--color-border-subtle)"}})]}),e.jsx("div",{className:"flex gap-3 mt-3",children:[...Array(4)].map((A,g)=>e.jsx("div",{className:"h-2 rounded-full w-8",style:{background:"var(--color-border-subtle)"}},g))})]},o))}),!c&&n&&e.jsxs("div",{className:"card p-6 text-center",children:[e.jsx("p",{className:"text-[13px] mb-3",style:{color:"var(--color-danger)"},children:n}),e.jsx("button",{onClick:f,className:"text-[12px] hover:opacity-80 transition-opacity",style:{color:"var(--color-primary)"},children:"Try again"})]}),!c&&!n&&l.length>0&&e.jsx("div",{style:{columnCount:3,columnGap:"1rem"},children:l.map((r,o)=>e.jsx(ee,{tweet:r},o))}),!c&&!n&&S&&l.length===0&&e.jsxs("div",{className:"card p-10 text-center",children:[e.jsx("div",{className:"w-12 h-12 rounded-2xl bg-gradient-to-br from-primary/20 to-accent/20 flex items-center justify-center mx-auto mb-4",children:e.jsx(E,{className:"w-6 h-6",style:{color:"var(--color-primary)"}})}),e.jsx("p",{className:"text-[15px] font-semibold mb-1",children:"No viral tweets found"}),e.jsx("p",{className:"text-[12px] mb-4",style:{color:"var(--color-text-muted)"},children:"Try a different keyword, lower the min likes threshold, or change the time period"}),e.jsx("button",{onClick:()=>{k(10),h(s||a[0]||"AI",i,d,10)},className:"text-[12px] font-medium hover:opacity-80 transition-opacity",style:{color:"var(--color-primary)"},children:"Try with fewer filters →"})]}),!c&&!n&&!S&&a.length===0&&e.jsxs("div",{className:"card p-10 text-center",children:[e.jsx("div",{className:"w-12 h-12 rounded-2xl bg-gradient-to-br from-primary/20 to-accent/20 flex items-center justify-center mx-auto mb-4",children:e.jsx(M,{className:"w-6 h-6",style:{color:"var(--color-primary)"}})}),e.jsx("p",{className:"text-[15px] font-semibold mb-1",children:"Search for viral tweets"}),e.jsx("p",{className:"text-[12px]",style:{color:"var(--color-text-muted)"},children:"Enter a keyword above to discover high-performing tweets in any niche"})]})]})}export{ce as default};
