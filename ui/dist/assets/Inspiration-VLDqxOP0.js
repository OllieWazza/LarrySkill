import{az as v,r as c,al as e,aK as y,au as k,ay as w,aL as C,aM as A,aN as S,aO as T}from"./index-C1dXcKKh.js";import{C as j}from"./chevron-right-BL1MmJDc.js";import{C as E}from"./chart-no-axes-column-CQpA40GD.js";function m(s){return!s&&s!==0?"â€”":s>=1e6?(s/1e6).toFixed(1)+"M":s>=1e3?(s/1e3).toFixed(1)+"K":String(s)}function M({post:s}){const r=v(),[x,i]=c.useState(!1),p=180,a=s.text?.length>p;return e.jsxs("div",{className:"card p-4 transition-all duration-200 cursor-pointer",style:{breakInside:"avoid",marginBottom:"1rem"},onMouseEnter:o=>{o.currentTarget.style.transform="translateY(-2px)",o.currentTarget.style.boxShadow="0 8px 24px oklch(0 0 0 / 0.3)"},onMouseLeave:o=>{o.currentTarget.style.transform="",o.currentTarget.style.boxShadow=""},children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-full flex items-center justify-center text-[12px] font-bold shrink-0",style:{background:`linear-gradient(135deg, oklch(0.65 0.19 ${(s.author?.username?.charCodeAt(0)||0)%360} / 0.35), oklch(0.65 0.18 ${((s.author?.username?.charCodeAt(0)||0)+60)%360} / 0.35))`,color:"var(--color-primary)"},children:(s.author?.name||"?")[0].toUpperCase()}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("p",{className:"text-[13px] font-semibold truncate",children:s.author?.name}),e.jsxs("p",{className:"text-[11px] truncate",style:{color:"var(--color-text-muted)"},children:["@",s.author?.username," Â· ",s.timeAgo]})]}),s.hasMedia&&e.jsx("span",{className:"text-[10px] px-1.5 py-0.5 rounded-full shrink-0 font-medium",style:{background:"oklch(0.65 0.18 300 / 0.12)",color:"var(--color-accent)"},children:"ðŸ“·"}),s.hasLinks&&!s.hasMedia&&e.jsx("span",{className:"text-[10px] px-1.5 py-0.5 rounded-full shrink-0 font-medium",style:{background:"oklch(0.65 0.19 250 / 0.12)",color:"var(--color-primary)"},children:"ðŸ”—"})]}),e.jsxs("p",{className:"text-[13px] leading-relaxed mb-3",style:{color:"var(--color-text-secondary)"},children:[a&&!x?s.text.slice(0,p)+"â€¦ ":s.text,a&&e.jsx("button",{onClick:o=>{o.stopPropagation(),i(!x)},className:"font-medium hover:opacity-80 transition-opacity",style:{color:"var(--color-primary)"},children:x?" Show less":"More >>"})]}),e.jsxs("div",{className:"flex items-center gap-3 text-[11px] mb-3",style:{color:"var(--color-text-muted)"},children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(C,{className:"w-3 h-3"}),m(s.replies)]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(A,{className:"w-3 h-3"}),m(s.retweets)]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(S,{className:"w-3 h-3"}),m(s.likes)]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(T,{className:"w-3 h-3"}),m(s.bookmarks)]}),e.jsxs("span",{className:"flex items-center gap-1 ml-auto",children:[e.jsx(E,{className:"w-3 h-3"}),m(s.impressions)]})]}),e.jsxs("button",{onClick:()=>r("/writer",{state:{prefill:s.text}}),className:"flex items-center gap-1 text-[12px] font-medium hover:opacity-80 transition-opacity",style:{color:"var(--color-primary)"},children:["Use as inspiration ",e.jsx(j,{className:"w-3.5 h-3.5"})]})]})}const I=[{id:"all",label:"All"},{id:"articles",label:"Articles"},{id:"media",label:"Media"}];function B(){const s=v(),[r,x]=c.useState("all"),[i,p]=c.useState([]),[a,o]=c.useState(!0),[u,f]=c.useState(null),[g,b]=c.useState(!0),d=async(t=r)=>{o(!0),f(null);try{const n=await(await fetch(`/api/inspiration?tab=${t}`)).json();if(n.error)throw new Error(n.error);p(n.posts||[]),(n.posts||[]).length===0&&n.noInterests&&b(!1)}catch(l){f(l.message||"Failed to load inspiration posts")}o(!1)};c.useEffect(()=>{fetch("/api/config").then(t=>t.json()).then(t=>{const l=Array.isArray(t.interests)&&t.interests.length>0;b(l),d(r)}).catch(()=>d(r))},[]);const N=t=>{x(t),d(t)};return e.jsxs("div",{className:"p-6 space-y-5 w-full",children:[e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-xl font-bold flex items-center gap-2",children:[e.jsx(y,{className:"w-5 h-5",style:{color:"var(--color-primary)"}}),"Inspiration"]}),e.jsx("p",{className:"text-[12px] mt-1",style:{color:"var(--color-text-muted)"},children:"Discover trending content. Never run out of ideas."})]}),e.jsxs("button",{onClick:()=>s("/viral"),className:"flex items-center gap-1.5 px-3 py-1.5 rounded-lg text-[12px] font-medium border hover:opacity-80 transition-opacity shrink-0",style:{borderColor:"var(--color-border-subtle)",color:"var(--color-text-muted)"},children:[e.jsx(k,{className:"w-3 h-3"}),"Explore more"]})]}),!g&&e.jsxs("button",{onClick:()=>s("/context"),className:"w-full card p-4 flex items-center gap-3 text-left hover:opacity-80 transition-opacity",style:{borderColor:"var(--color-warning)",background:"oklch(0.75 0.15 75 / 0.06)"},children:[e.jsx(y,{className:"w-4 h-4 shrink-0",style:{color:"var(--color-warning)"}}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-[13px] font-semibold",style:{color:"var(--color-warning)"},children:"Add interests to see personalised inspiration"}),e.jsx("p",{className:"text-[11px] mt-0.5",style:{color:"var(--color-text-muted)"},children:"Go to Context â†’ Your Interests to select your topics"})]}),e.jsx(j,{className:"w-4 h-4 shrink-0",style:{color:"var(--color-text-muted)"}})]}),e.jsx("div",{className:"flex items-center gap-2",children:I.map(t=>e.jsx("button",{onClick:()=>N(t.id),className:"px-4 py-1.5 rounded-full text-[12px] font-medium transition-all border",style:{background:r===t.id?"oklch(0.65 0.19 250 / 0.12)":"transparent",borderColor:r===t.id?"var(--color-primary)":"var(--color-border-subtle)",color:r===t.id?"var(--color-primary)":"var(--color-text-muted)"},children:t.label},t.id))}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h2",{className:"text-[14px] font-semibold flex items-center gap-2",children:["Popular posts",!a&&e.jsx("span",{className:"text-[11px] font-normal px-2 py-0.5 rounded-full",style:{background:"var(--color-bg-secondary)",color:"var(--color-text-muted)"},children:i.length})]}),e.jsxs("button",{onClick:()=>d(),disabled:a,className:"flex items-center gap-1.5 text-[12px] hover:opacity-80 transition-opacity disabled:opacity-40",style:{color:"var(--color-text-muted)"},children:[e.jsx(w,{className:`w-3.5 h-3.5 ${a?"animate-spin":""}`}),"Refresh"]})]}),a&&e.jsx("div",{style:{columnCount:3,columnGap:"1rem"},children:[...Array(6)].map((t,l)=>e.jsxs("div",{className:"card p-4 animate-pulse",style:{breakInside:"avoid",marginBottom:"1rem"},children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-full",style:{background:"var(--color-border-subtle)"}}),e.jsxs("div",{className:"flex-1 space-y-1.5",children:[e.jsx("div",{className:"h-2.5 rounded-full w-24",style:{background:"var(--color-border-subtle)"}}),e.jsx("div",{className:"h-2 rounded-full w-16",style:{background:"var(--color-border-subtle)"}})]})]}),e.jsx("div",{className:"space-y-1.5",children:[...Array(l%3+2)].map((n,h)=>e.jsx("div",{className:"h-2.5 rounded-full",style:{width:`${55+h*13%40}%`,background:"var(--color-border-subtle)"}},h))}),e.jsx("div",{className:"flex gap-3 mt-3",children:[...Array(4)].map((n,h)=>e.jsx("div",{className:"h-2 rounded-full w-8",style:{background:"var(--color-border-subtle)"}},h))})]},l))}),!a&&u&&e.jsxs("div",{className:"card p-8 text-center",children:[e.jsx("p",{className:"text-[13px] mb-3",style:{color:"var(--color-danger)"},children:u}),e.jsx("button",{onClick:()=>d(),className:"text-[12px] hover:opacity-80 transition-opacity",style:{color:"var(--color-primary)"},children:"Try again"})]}),!a&&!u&&i.length>0&&e.jsx("div",{style:{columnCount:3,columnGap:"1rem"},children:i.map((t,l)=>e.jsx(M,{post:t},l))}),!a&&!u&&i.length===0&&e.jsxs("div",{className:"card p-10 text-center",children:[e.jsx("div",{className:"w-12 h-12 rounded-2xl bg-gradient-to-br from-primary/20 to-accent/20 flex items-center justify-center mx-auto mb-4",children:e.jsx(y,{className:"w-6 h-6",style:{color:"var(--color-primary)"}})}),e.jsx("p",{className:"text-[15px] font-semibold mb-1",children:"No inspiration posts found"}),e.jsx("p",{className:"text-[12px] mb-5",style:{color:"var(--color-text-muted)"},children:r!=="all"?`No ${r} posts found. Try switching to "All".`:"Add interests in your Context to get personalised inspiration."}),e.jsxs("div",{className:"flex items-center justify-center gap-3",children:[e.jsx("button",{onClick:()=>d(),className:"px-4 py-2 text-[12px] font-medium rounded-lg border hover:opacity-80 transition-opacity",style:{borderColor:"var(--color-border-subtle)",color:"var(--color-text-muted)"},children:"Refresh"}),e.jsx("button",{onClick:()=>s("/context"),className:"px-5 py-2 text-[13px] font-semibold rounded-lg bg-gradient-to-r from-primary to-accent text-white hover:opacity-90 transition-opacity",children:"Set up Context"})]})]})]})}export{B as default};
