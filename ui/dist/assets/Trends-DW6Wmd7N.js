import{r as l,al as e,av as p,ay as u,aQ as R,au as S,aP as f}from"./index-C1dXcKKh.js";function v(r){return!r&&r!==0?"â€”":r>=1e6?(r/1e6).toFixed(1)+"M":r>=1e3?(r/1e3).toFixed(1)+"K":String(r)}function _(){const[r,y]=l.useState([]),[c,j]=l.useState([]),[N,g]=l.useState(!0),[b,w]=l.useState(!0),[n,i]=l.useState(!1),[d,x]=l.useState(!1),[k,C]=l.useState("UK"),m=async(s=!1)=>{s&&i(!0);try{const t=await(await fetch("/api/trends")).json();y(t.trends||[]),t.location&&C(t.location)}catch{}g(!1),i(!1)},h=async(s=!1)=>{s&&x(!0);try{const t=await(await fetch("/api/trends/niche")).json();j(t.nicheTrends||[])}catch{}w(!1),x(!1)};return l.useEffect(()=>{m(),h()},[]),e.jsxs("div",{className:"p-6 space-y-6 w-full",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-xl font-bold flex items-center gap-2",children:[e.jsx(p,{className:"w-5 h-5",style:{color:"var(--color-primary)"}}),"Trending Globally"]}),e.jsxs("p",{className:"text-[12px] mt-0.5",style:{color:"var(--color-text-muted)"},children:["What's trending on X right now Â· ",k," Â· Change WOEID in Settings"]})]}),e.jsxs("button",{onClick:()=>m(!0),disabled:n,className:"flex items-center gap-1.5 text-[12px] hover:opacity-80 transition-opacity disabled:opacity-40",style:{color:"var(--color-text-muted)"},children:[e.jsx(u,{className:`w-3.5 h-3.5 ${n?"animate-spin":""}`}),"Refresh"]})]}),N?e.jsx("div",{className:"card divide-y",style:{borderColor:"var(--color-border-subtle)"},children:Array.from({length:12}).map((s,a)=>e.jsxs("div",{className:"flex items-center gap-3 px-4 py-3 animate-pulse",children:[e.jsx("div",{className:"w-5 h-2.5 rounded-full",style:{background:"var(--color-border-subtle)"}}),e.jsx("div",{className:"h-3 rounded-full flex-1",style:{background:"var(--color-border-subtle)",maxWidth:"200px"}})]},a))}):r.length>0?e.jsx("div",{className:"card divide-y",style:{borderColor:"var(--color-border-subtle)"},children:r.map((s,a)=>e.jsxs("a",{href:`https://x.com/search?q=${encodeURIComponent(s.name)}`,target:"_blank",rel:"noopener",className:"flex items-center justify-between px-4 py-3 transition-colors hover:bg-[var(--color-surface-hover)] group",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-[11px] font-mono w-5 text-right",style:{color:"var(--color-text-muted)"},children:a+1}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(R,{className:"w-3 h-3 shrink-0",style:{color:"var(--color-primary)"}}),e.jsx("span",{className:"text-[13px] font-medium",children:s.name})]}),s.category&&e.jsx("p",{className:"text-[10px] mt-0.5 ml-5",style:{color:"var(--color-text-muted)"},children:s.category})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[s.tweet_count!=null&&e.jsx("span",{className:"text-[11px] font-mono",style:{color:"var(--color-text-muted)"},children:s.tweet_count>=1e3?(s.tweet_count/1e3).toFixed(1)+"K":s.tweet_count}),e.jsx(S,{className:"w-3.5 h-3.5 opacity-0 group-hover:opacity-60 transition-opacity",style:{color:"var(--color-text-muted)"}})]})]},a))}):e.jsxs("div",{className:"card p-10 text-center",children:[e.jsx(p,{className:"w-8 h-8 mx-auto mb-3",style:{color:"var(--color-text-muted)"}}),e.jsx("p",{className:"text-[14px] font-medium mb-1",children:"Trends unavailable"}),e.jsx("p",{className:"text-[12px]",style:{color:"var(--color-text-muted)"},children:"Requires Twitter v1.1 API credentials. Check your Settings."})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-xl font-bold flex items-center gap-2",children:[e.jsx(f,{className:"w-5 h-5",style:{color:"var(--color-accent)"}}),"Trending in Your Niche"]}),e.jsx("p",{className:"text-[12px] mt-0.5",style:{color:"var(--color-text-muted)"},children:"Popular topics and tweets from your interest areas"})]}),e.jsxs("button",{onClick:()=>h(!0),disabled:d,className:"flex items-center gap-1.5 text-[12px] hover:opacity-80 transition-opacity disabled:opacity-40",style:{color:"var(--color-text-muted)"},children:[e.jsx(u,{className:`w-3.5 h-3.5 ${d?"animate-spin":""}`}),"Refresh"]})]}),b?e.jsx("div",{className:"grid grid-cols-3 gap-4",children:Array.from({length:3}).map((s,a)=>e.jsxs("div",{className:"card p-4 animate-pulse space-y-3",children:[e.jsx("div",{className:"h-3 w-24 rounded-full",style:{background:"var(--color-border-subtle)"}}),[...Array(3)].map((t,o)=>e.jsxs("div",{className:"space-y-1.5",children:[e.jsx("div",{className:"h-2.5 rounded-full",style:{background:"var(--color-border-subtle)",width:`${60+o*10}%`}}),e.jsx("div",{className:"h-2 rounded-full w-20",style:{background:"var(--color-border-subtle)"}})]},o))]},a))}):c.length>0?e.jsx("div",{className:"grid grid-cols-3 gap-4",children:c.map((s,a)=>e.jsxs("div",{className:"card p-4",children:[e.jsx("div",{className:"mb-3",children:e.jsx("span",{className:"text-[12px] font-bold px-2.5 py-1 rounded-full",style:{background:"oklch(0.65 0.18 300 / 0.12)",color:"var(--color-accent)"},children:s.topic})}),s.relatedHashtags.length>0&&e.jsx("div",{className:"flex flex-wrap gap-1.5 mb-3",children:s.relatedHashtags.map((t,o)=>e.jsx("a",{href:`https://x.com/search?q=${encodeURIComponent(t)}`,target:"_blank",rel:"noopener",className:"text-[10px] px-1.5 py-0.5 rounded-full border hover:opacity-80 transition-opacity",style:{borderColor:"var(--color-border-subtle)",color:"var(--color-primary)"},children:t},o))}),e.jsx("div",{className:"space-y-2",children:s.tweets.map((t,o)=>e.jsxs("div",{className:"p-2.5 rounded-lg text-[11px]",style:{background:"var(--color-bg-secondary)",color:"var(--color-text-secondary)"},children:[e.jsx("p",{className:"line-clamp-3 mb-1.5",children:t.text}),e.jsxs("div",{className:"flex items-center gap-2",style:{color:"var(--color-text-muted)"},children:[e.jsxs("a",{href:`https://x.com/${t.author.username}`,target:"_blank",rel:"noopener",className:"font-medium hover:opacity-80 truncate",style:{color:"var(--color-primary)"},children:["@",t.author.username]}),e.jsxs("span",{className:"ml-auto shrink-0",children:["â¤ï¸ ",v(t.likes)]}),t.impressions>0&&e.jsxs("span",{className:"shrink-0",children:["ğŸ‘ ",v(t.impressions)]})]})]},o))})]},a))}):e.jsxs("div",{className:"card p-10 text-center",children:[e.jsx(f,{className:"w-8 h-8 mx-auto mb-3",style:{color:"var(--color-text-muted)"}}),e.jsx("p",{className:"text-[14px] font-medium mb-1",children:"No niche trends found"}),e.jsx("p",{className:"text-[12px]",style:{color:"var(--color-text-muted)"},children:"Add interests in Context â†’ Your Interests to see what's trending in your niche."})]})]})]})}export{_ as default};
