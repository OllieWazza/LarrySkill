import{ax as x,az as j,r as l,al as e,aw as u,aI as A,ay as I,aJ as _,au as L}from"./index-C1dXcKKh.js";import{C as N}from"./chevron-right-BL1MmJDc.js";import{C as V}from"./check-CwRgc88d.js";const E=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m16.24 7.76-1.804 5.411a2 2 0 0 1-1.265 1.265L7.76 16.24l1.804-5.411a2 2 0 0 1 1.265-1.265z",key:"9ktpf1"}]],T=x("compass",E);const U=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],z=x("image",U);const D=[["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}],["path",{d:"M3.103 6.034h17.794",key:"awc11p"}],["path",{d:"M3.4 5.467a2 2 0 0 0-.4 1.2V20a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6.667a2 2 0 0 0-.4-1.2l-2-2.667A2 2 0 0 0 17 2H7a2 2 0 0 0-1.6.8z",key:"o988cm"}]],G=x("shopping-bag",D);const R=[["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M12 21v-9",key:"17s77i"}],["path",{d:"M12 8V3",key:"13r4qs"}],["path",{d:"M17 16h4",key:"h1uq16"}],["path",{d:"M19 12V3",key:"o1uvq1"}],["path",{d:"M19 21v-5",key:"qua636"}],["path",{d:"M3 14h4",key:"bcjad9"}],["path",{d:"M5 10V3",key:"cb8scm"}],["path",{d:"M5 21v-7",key:"1w1uti"}]],$=x("sliders-vertical",R);const q=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],P=x("star",q);function b(t){return!t&&t!==0?"â€”":t>=1e6?(t/1e6).toFixed(1)+"M":t>=1e3?(t/1e3).toFixed(1)+"K":String(t)}const y=[{id:"all",label:"All",icon:null,textColor:null,bgChip:null},{id:"for-you",label:"For You",icon:P,textColor:"oklch(0.75 0.15 75)",bgChip:"oklch(0.75 0.15 75 / 0.15)"},{id:"products",label:"Products",icon:G,textColor:"oklch(0.65 0.19 250)",bgChip:"oklch(0.65 0.19 250 / 0.12)"},{id:"trending",label:"Trending",icon:T,textColor:"oklch(0.65 0.2 25)",bgChip:"oklch(0.65 0.2 25 / 0.12)"},{id:"media",label:"Media",icon:z,textColor:"oklch(0.65 0.18 300)",bgChip:"oklch(0.65 0.18 300 / 0.12)"},{id:"viral",label:"Viral",icon:_,textColor:"oklch(0.72 0.19 155)",bgChip:"oklch(0.72 0.19 155 / 0.12)"}];function F(t){return y.find(r=>r.id===t)||y[0]}function O({tweet:t,user:r}){const p=j(),[m,h]=l.useState(!1),a=F(t.category),n=a?.icon,c=()=>{navigator.clipboard.writeText(t.text).catch(()=>{}),h(!0),setTimeout(()=>h(!1),2e3)};return e.jsxs("div",{className:"card p-5 space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2.5",children:[r?.profileImage?e.jsx("img",{src:r.profileImage,alt:"",className:"w-8 h-8 rounded-full object-cover"}):e.jsx("div",{className:"w-8 h-8 rounded-full flex items-center justify-center text-[12px] font-bold shrink-0",style:{background:"linear-gradient(135deg, oklch(0.65 0.19 250 / 0.3), oklch(0.65 0.18 300 / 0.3))",color:"var(--color-primary)"},children:(r?.name||"U")[0].toUpperCase()}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("p",{className:"text-[13px] font-semibold truncate",children:r?.name||"You"}),e.jsxs("p",{className:"text-[11px]",style:{color:"var(--color-text-muted)"},children:["@",r?.username||"you"]})]}),n&&a.textColor&&e.jsxs("span",{className:"flex items-center gap-1 px-2 py-0.5 rounded-full text-[10px] font-semibold shrink-0",style:{background:a.bgChip,color:a.textColor},children:[e.jsx(n,{className:"w-3 h-3"}),a.label]})]}),e.jsx("p",{className:"text-[13px] leading-relaxed whitespace-pre-wrap",style:{color:"var(--color-text)"},children:t.text}),t.sourceUrl&&e.jsxs("a",{href:t.sourceUrl,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1 text-[11px] hover:opacity-80 transition-opacity",style:{color:"var(--color-primary)"},children:[e.jsx(L,{className:"w-3 h-3"}),"View Source"]}),t.original&&e.jsxs("div",{className:"rounded-lg p-3 text-[11px]",style:{background:"var(--color-bg-secondary)",borderLeft:"2px solid oklch(0.72 0.19 155 / 0.5)"},children:[e.jsxs("p",{className:"font-semibold mb-1",style:{color:"var(--color-text-muted)"},children:["Original by @",t.original.username]}),e.jsx("p",{className:"line-clamp-2 mb-1.5",style:{color:"var(--color-text-muted)"},children:t.original.text}),e.jsxs("div",{className:"flex items-center gap-3",style:{color:"var(--color-text-muted)"},children:[e.jsxs("span",{children:["â¤ï¸ ",b(t.original.likes)]}),e.jsxs("span",{children:["ðŸ” ",b(t.original.retweets)]}),t.original.impressions>0&&e.jsxs("span",{children:["ðŸ“Š ",b(t.original.impressions)]})]})]}),e.jsxs("div",{className:"flex items-center justify-between pt-1 border-t",style:{borderColor:"var(--color-border-subtle)"},children:[e.jsxs("span",{className:`text-[11px] font-mono ${t.text.length>240?"text-danger":t.text.length>200?"text-warning":""}`,style:t.text.length<=200?{color:"var(--color-text-muted)"}:{},children:[t.text.length,"/280"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:()=>p("/writer",{state:{prefill:t.text}}),className:"flex items-center gap-1 text-[11px] hover:opacity-80 transition-opacity",style:{color:"var(--color-text-muted)"},children:["Edit ",e.jsx(N,{className:"w-3 h-3"})]}),e.jsxs("button",{onClick:c,className:"flex items-center gap-1.5 px-3 py-1.5 rounded-lg text-[12px] font-semibold bg-gradient-to-r from-primary to-accent text-white hover:opacity-90 transition-all",children:[m?e.jsx(V,{className:"w-3 h-3"}):e.jsx(u,{className:"w-3 h-3"}),m?"Copied!":"Use post âœ¨"]})]})]})]})}function J(){const t=j(),[r,p]=l.useState([]),[m,h]=l.useState(null),[a,n]=l.useState(!1),[c,f]=l.useState(!0),[d,k]=l.useState("all"),[C,w]=l.useState(!0);l.useEffect(()=>{Promise.all([fetch("/api/config").then(s=>s.json()),fetch("/api/daily-mix").then(s=>s.json())]).then(([s,o])=>{h(s.user);const i=!!s.aboutYou,S=Array.isArray(s.interests)&&s.interests.length>0;w(i||S),p(o.posts||[]),f(!1)}).catch(()=>f(!1))},[]);const v=async()=>{n(!0);try{const o=await(await fetch("/api/daily-mix/generate",{method:"POST"})).json();p(o.posts||[])}catch{}n(!1)},g=d==="all"?r:r.filter(s=>s.category===d),M=s=>s==="all"?r.length:r.filter(o=>o.category===s).length;return e.jsxs("div",{className:"p-6 space-y-5 w-full",children:[e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-xl font-bold flex items-center gap-2",children:[e.jsx(u,{className:"w-5 h-5",style:{color:"var(--color-primary)"}}),"Daily Mix"]}),e.jsx("p",{className:"text-[12px] mt-1",style:{color:"var(--color-text-muted)"},children:"Daily AI generated posts tailored to your profile and interests that you can use as inspiration or post directly"})]}),e.jsxs("div",{className:"flex items-center gap-2 shrink-0",children:[e.jsxs("button",{onClick:()=>t("/context"),className:"flex items-center gap-1.5 px-3 py-1.5 rounded-lg text-[12px] font-medium border hover:opacity-80 transition-opacity",style:{borderColor:"var(--color-border-subtle)",color:"var(--color-text-muted)"},children:[e.jsx(A,{className:"w-3 h-3"}),"Manage context"]}),e.jsxs("button",{className:"flex items-center gap-1.5 px-3 py-1.5 rounded-lg text-[12px] font-medium border hover:opacity-80 transition-opacity",style:{borderColor:"var(--color-border-subtle)",color:"var(--color-text-muted)"},children:[e.jsx($,{className:"w-3 h-3"}),"Customize"]}),e.jsxs("button",{onClick:v,disabled:a,className:"flex items-center gap-1.5 px-3 py-1.5 rounded-lg text-[12px] font-semibold bg-gradient-to-r from-primary to-accent text-white hover:opacity-90 transition-opacity disabled:opacity-50",children:[a?e.jsx("div",{className:"animate-spin rounded-full h-3 w-3 border-2 border-white border-t-transparent"}):e.jsx(I,{className:"w-3 h-3"}),"Regenerate"]})]})]}),!C&&!c&&e.jsxs("button",{onClick:()=>t("/context"),className:"w-full card p-4 flex items-center gap-3 text-left hover:opacity-80 transition-opacity",style:{borderColor:"var(--color-warning)",background:"oklch(0.75 0.15 75 / 0.06)"},children:[e.jsx(u,{className:"w-4 h-4 shrink-0",style:{color:"var(--color-warning)"}}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-[13px] font-semibold",style:{color:"var(--color-warning)"},children:"Set up your Context for better AI-generated posts"}),e.jsx("p",{className:"text-[11px] mt-0.5",style:{color:"var(--color-text-muted)"},children:"Add your bio, interests, and products so the AI can tailor the mix to you"})]}),e.jsx(N,{className:"w-4 h-4 shrink-0",style:{color:"var(--color-text-muted)"}})]}),e.jsx("div",{className:"flex items-center gap-2 flex-wrap",children:y.map(s=>{const o=M(s.id),i=d===s.id;return e.jsxs("button",{onClick:()=>k(s.id),className:"flex items-center gap-1.5 px-3.5 py-1.5 rounded-full text-[12px] font-medium transition-all border",style:{background:i?"oklch(0.65 0.19 250 / 0.12)":"transparent",borderColor:i?"var(--color-primary)":"var(--color-border-subtle)",color:i?"var(--color-primary)":"var(--color-text-secondary)"},children:[s.label,e.jsx("span",{className:"px-1.5 py-0.5 rounded-full text-[10px] font-semibold",style:{background:i?"oklch(0.65 0.19 250 / 0.15)":"var(--color-bg-secondary)",color:i?"var(--color-primary)":"var(--color-text-muted)"},children:o})]},s.id)})}),(c||a)&&e.jsxs("div",{className:"space-y-3",children:[[1,2,3].map(s=>e.jsxs("div",{className:"card p-5 space-y-3 animate-pulse",children:[e.jsxs("div",{className:"flex items-center gap-2.5",children:[e.jsx("div",{className:"w-8 h-8 rounded-full",style:{background:"var(--color-border-subtle)"}}),e.jsxs("div",{className:"space-y-1 flex-1",children:[e.jsx("div",{className:"h-2.5 rounded-full w-24",style:{background:"var(--color-border-subtle)"}}),e.jsx("div",{className:"h-2 rounded-full w-16",style:{background:"var(--color-border-subtle)"}})]}),e.jsx("div",{className:"h-5 w-16 rounded-full",style:{background:"var(--color-border-subtle)"}})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsx("div",{className:"h-2.5 rounded-full",style:{background:"var(--color-border-subtle)"}}),e.jsx("div",{className:"h-2.5 rounded-full w-4/5",style:{background:"var(--color-border-subtle)"}}),e.jsx("div",{className:"h-2.5 rounded-full w-3/5",style:{background:"var(--color-border-subtle)"}})]})]},s)),a&&e.jsx("p",{className:"text-center text-[12px]",style:{color:"var(--color-text-muted)"},children:"âœ¨ Generating your Daily Mix â€” this takes about 10-15 secondsâ€¦"})]}),!c&&!a&&g.length>0&&e.jsx("div",{className:"space-y-3",children:g.map((s,o)=>e.jsx(O,{tweet:s,user:m},o))}),!c&&!a&&r.length>0&&g.length===0&&e.jsxs("div",{className:"card p-8 text-center",children:[e.jsxs("p",{className:"text-[14px] font-medium mb-1",children:["No ",y.find(s=>s.id===d)?.label||d," posts in this mix"]}),e.jsx("p",{className:"text-[12px]",style:{color:"var(--color-text-muted)"},children:"Try regenerating or select a different category"})]}),!c&&!a&&r.length===0&&e.jsxs("div",{className:"card p-10 text-center",children:[e.jsx("div",{className:"w-12 h-12 rounded-2xl bg-gradient-to-br from-primary/20 to-accent/20 flex items-center justify-center mx-auto mb-4",children:e.jsx(u,{className:"w-6 h-6",style:{color:"var(--color-primary)"}})}),e.jsx("p",{className:"text-[15px] font-semibold mb-1",children:"Generate your Daily Mix"}),e.jsx("p",{className:"text-[12px] mb-5",style:{color:"var(--color-text-muted)"},children:"15 AI-crafted posts across 5 categories â€” tailored to your profile and interests"}),e.jsx("button",{onClick:v,className:"px-5 py-2.5 text-[13px] font-semibold rounded-lg bg-gradient-to-r from-primary to-accent text-white hover:opacity-90 transition-opacity",children:"Generate Now âœ¨"})]})]})}export{J as default};
