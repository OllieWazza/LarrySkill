import{ax as z,az as K,r as o,al as e,aH as V,aw as Q,ay as Z,aF as Y,aG as O,au as ee}from"./index-C1dXcKKh.js";import{C as te}from"./chevron-right-BL1MmJDc.js";const se=[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]],re=z("bot",se);const oe=[["path",{d:"m10 16 1.5 1.5",key:"11lckj"}],["path",{d:"m14 8-1.5-1.5",key:"1ohn8i"}],["path",{d:"M15 2c-1.798 1.998-2.518 3.995-2.807 5.993",key:"80uv8i"}],["path",{d:"m16.5 10.5 1 1",key:"696xn5"}],["path",{d:"m17 6-2.891-2.891",key:"xu6p2f"}],["path",{d:"M2 15c6.667-6 13.333 0 20-6",key:"1pyr53"}],["path",{d:"m20 9 .891.891",key:"3xwk7g"}],["path",{d:"M3.109 14.109 4 15",key:"q76aoh"}],["path",{d:"m6.5 12.5 1 1",key:"cs35ky"}],["path",{d:"m7 18 2.891 2.891",key:"1sisit"}],["path",{d:"M9 22c1.798-1.998 2.518-3.995 2.807-5.993",key:"q3hbxp"}]],L=z("dna",oe),ae=[{label:"Business",tags:["Startups","Investing","Marketing","Sales","Leadership","Entrepreneurship"]},{label:"Technology",tags:["AI/ML","Web3","SaaS","Cybersecurity","DevOps","Mobile"]},{label:"Creativity",tags:["Design","Writing","Photography","Music","Film","Art"]},{label:"Lifestyle",tags:["Fitness","Travel","Food","Fashion","Wellness","Mindfulness"]},{label:"Science",tags:["Physics","Biology","Space","Climate","Medicine","Psychology"]},{label:"Finance",tags:["Crypto","Stocks","Real Estate","Personal Finance","Economics","Trading"]}];function x({title:c,children:g}){return e.jsxs("div",{className:"card p-5",children:[e.jsx("h2",{className:"text-[14px] font-semibold mb-4",children:c}),g]})}function v({status:c}){return c?e.jsx("span",{className:"text-[11px] flex items-center gap-1 transition-opacity",style:{color:c==="saved"?"var(--color-success)":"var(--color-text-muted)"},children:c==="saving"?"Saving…":c==="saved"?"✓ Saved":null}):null}function ne(){const c=K(),[g,W]=o.useState(null),[u,p]=o.useState(""),[n,f]=o.useState([]),[i,j]=o.useState([]),[N,k]=o.useState([]),[P,_]=o.useState([]),[m,h]=o.useState({}),[w,D]=o.useState(""),[d,y]=o.useState({name:"",url:"",description:""}),[U,C]=o.useState(!1),T=o.useRef({}),[a,I]=o.useState(null),[S,M]=o.useState(!1),[E,A]=o.useState(null);o.useEffect(()=>{fetch("/api/context").then(t=>t.json()).then(t=>{W(t),p(t.aboutYou||""),f(t.interests||[]),j(t.favouriteCreators||[]),k(t.products||[]),_(t.writingDNA?.liked?.map(s=>({liked:!0,text:s.text||s}))||[])}).catch(()=>{}),fetch("/api/context/auto-detect",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({})}).then(t=>t.json()).then(t=>{t.error||I(t)}).catch(()=>{})},[]);const X=async(t=!1)=>{M(!0),A(null);try{const r=await(await fetch("/api/context/auto-detect",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({force:t})})).json();r.error?A(r.error):(I(r),!u&&r.bio&&(p(r.bio),l("aboutYou",r.bio)))}catch{A("Failed to connect")}M(!1)},q=t=>{if(n.includes(t))return;const s=[...n,t];f(s),l("interests",s)},l=(t,s)=>{clearTimeout(T.current[t]),h(r=>({...r,[t]:"saving"})),T.current[t]=setTimeout(async()=>{try{await fetch("/api/config",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({[t]:s})}),h(r=>({...r,[t]:"saved"})),setTimeout(()=>h(r=>({...r,[t]:null})),2e3)}catch{h(r=>({...r,[t]:null}))}},800)},B=t=>{const s=n.includes(t)?n.filter(r=>r!==t):[...n,t];f(s),l("interests",s)},R=()=>{const t=w.replace("@","").trim();if(!t||i.length>=3||i.includes(t))return;const s=[...i,t];j(s),D(""),l("favouriteCreators",s)},J=t=>{const s=i.filter(r=>r!==t);j(s),l("favouriteCreators",s)},$=()=>{if(!d.name.trim())return;const t=[...N,{...d,id:Date.now()}];k(t),y({name:"",url:"",description:""}),C(!1),l("products",t)},G=t=>{const s=N.filter(r=>r.id!==t);k(s),l("products",s)};if(!g)return e.jsx("div",{className:"p-8 flex items-center justify-center h-full",children:e.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-2 border-primary border-t-transparent"})});const F=(a?.detectedInterests||[]).filter(t=>!n.includes(t)).slice(0,8);return e.jsxs("div",{className:"p-6 space-y-5 w-full",children:[e.jsx("div",{className:"flex items-center gap-3",children:e.jsxs("div",{children:[e.jsxs("h1",{className:"text-xl font-bold flex items-center gap-2",children:[e.jsx(V,{className:"w-5 h-5",style:{color:"var(--color-primary)"}}),"Context"]}),e.jsx("p",{className:"text-[12px] mt-0.5",style:{color:"var(--color-text-muted)"},children:"Personalize the AI to write in your voice and about your interests"})]})}),e.jsxs("div",{className:"rounded-xl p-4 flex items-start justify-between gap-4",style:{background:"oklch(0.65 0.19 250 / 0.06)",border:"1px solid oklch(0.65 0.19 250 / 0.2)"},children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Q,{className:"w-4 h-4 mt-0.5 shrink-0",style:{color:"var(--color-primary)"}}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[13px] font-semibold",style:{color:"var(--color-text)"},children:"Auto-detected from your X account ✨"}),a?e.jsxs("p",{className:"text-[11px] mt-0.5",style:{color:"var(--color-text-muted)"},children:["Analysed ",a.tweetsAnalyzed," tweets · ",a.detectedInterests?.length||0," interests detected · Tap tags below to apply suggestions"]}):E?e.jsx("p",{className:"text-[11px] mt-0.5",style:{color:"var(--color-danger)"},children:E}):e.jsx("p",{className:"text-[11px] mt-0.5",style:{color:"var(--color-text-muted)"},children:"Click Refresh to scan your X account and auto-populate this page"})]})]}),e.jsxs("button",{onClick:()=>X(!0),disabled:S,className:"flex items-center gap-1.5 px-3 py-1.5 rounded-lg text-[12px] font-medium transition-opacity hover:opacity-80 disabled:opacity-40 shrink-0",style:{background:"oklch(0.65 0.19 250 / 0.12)",color:"var(--color-primary)"},children:[e.jsx(Z,{className:`w-3.5 h-3.5 ${S?"animate-spin":""}`}),S?"Scanning…":"Refresh"]})]}),F.length>0&&e.jsxs("div",{className:"rounded-xl p-4",style:{background:"var(--color-bg-secondary)",border:"1px solid var(--color-border-subtle)"},children:[e.jsx("p",{className:"text-[11px] font-semibold uppercase tracking-wide mb-2.5",style:{color:"var(--color-text-muted)"},children:"Suggested from your tweets — tap to add"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:F.map(t=>e.jsxs("button",{onClick:()=>q(t),className:"px-3 py-1.5 rounded-full text-[12px] font-medium border transition-all hover:scale-105",style:{background:"oklch(0.65 0.19 250 / 0.08)",borderColor:"oklch(0.65 0.19 250 / 0.3)",color:"var(--color-primary)"},children:["✨ ",t]},t))})]}),a?.agentContext&&a.agentContext.length>0&&e.jsxs("div",{className:"rounded-xl p-4",style:{background:"var(--color-bg-secondary)",border:"1px solid var(--color-border-subtle)"},children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(re,{className:"w-4 h-4",style:{color:"var(--color-accent)"}}),e.jsx("p",{className:"text-[13px] font-semibold",children:"From your OpenClaw agent"})]}),a.agentContext.map((t,s)=>e.jsxs("div",{className:"mb-3",children:[e.jsx("p",{className:"text-[10px] font-semibold uppercase tracking-wide mb-1",style:{color:"var(--color-text-muted)"},children:t.source}),e.jsx("p",{className:"text-[11px] leading-relaxed whitespace-pre-wrap line-clamp-4",style:{color:"var(--color-text-secondary)"},children:t.content})]},s)),e.jsx("p",{className:"text-[10px] mt-1",style:{color:"var(--color-text-muted)"},children:"Context from agent workspace files — read-only, for reference"})]}),e.jsx(x,{title:"About You",children:e.jsxs("div",{className:"relative",children:[a?.bio&&!u&&e.jsxs("div",{className:"mb-2 flex items-center justify-between",children:[e.jsx("p",{className:"text-[11px]",style:{color:"var(--color-text-muted)"},children:"Detected from your X bio — click to apply"}),e.jsx("button",{onClick:()=>{p(a.bio),l("aboutYou",a.bio)},className:"text-[11px] font-medium px-2 py-0.5 rounded",style:{color:"var(--color-primary)",background:"oklch(0.65 0.19 250 / 0.08)"},children:"Use bio ✨"})]}),e.jsx("textarea",{value:u,onChange:t=>{const s=t.target.value.slice(0,500);p(s),l("aboutYou",s)},rows:4,placeholder:a?.bio?a.bio:"Describe yourself — who you are, what you do, your goals, your audience. The AI uses this to write in your voice.",className:"w-full px-3 py-2.5 rounded-lg text-[13px] border resize-none",style:{background:"var(--color-bg)",borderColor:"var(--color-border-subtle)",color:"var(--color-text)"}}),e.jsxs("div",{className:"flex items-center justify-between mt-1.5",children:[e.jsx(v,{status:m.aboutYou}),e.jsxs("span",{className:"text-[11px] ml-auto",style:{color:"var(--color-text-muted)"},children:[u.length,"/500"]})]})]})}),e.jsxs(x,{title:"Your Interests",children:[e.jsx("p",{className:"text-[12px] mb-4",style:{color:"var(--color-text-muted)"},children:"Toggle topics to get relevant content suggestions and viral tweet recommendations"}),e.jsx("div",{className:"space-y-4",children:ae.map(({label:t,tags:s})=>e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] uppercase tracking-wider font-semibold mb-2",style:{color:"var(--color-text-muted)"},children:t}),e.jsx("div",{className:"flex flex-wrap gap-2",children:s.map(r=>{const b=n.includes(r),H=a?.detectedInterests?.includes(r);return e.jsxs("button",{onClick:()=>B(r),className:"px-3 py-1.5 rounded-full text-[12px] font-medium transition-all duration-150 border",style:{background:b?"oklch(0.65 0.19 250 / 0.12)":"transparent",borderColor:b?"var(--color-primary)":"var(--color-border-subtle)",color:b?"var(--color-primary)":"var(--color-text-secondary)"},children:[H&&!b?"✨ ":"",r]},r)})})]},t))}),e.jsxs("div",{className:"mt-3 flex items-center justify-between",children:[e.jsxs("span",{className:"text-[11px]",style:{color:"var(--color-text-muted)"},children:[n.length," selected"]}),e.jsx(v,{status:m.interests})]})]}),e.jsxs(x,{title:"Favourite Creators",children:[e.jsx("p",{className:"text-[12px] mb-4",style:{color:"var(--color-text-muted)"},children:"Up to 3 accounts whose writing style you admire — the AI will learn from them"}),e.jsx("div",{className:"space-y-2 mb-3",children:i.map(t=>e.jsxs("div",{className:"flex items-center justify-between px-3 py-2 rounded-lg",style:{background:"var(--color-bg-secondary)"},children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-6 h-6 rounded-full bg-gradient-to-br from-primary/20 to-accent/20 flex items-center justify-center text-[10px] font-semibold text-primary",children:t[0].toUpperCase()}),e.jsxs("span",{className:"text-[13px] font-medium",children:["@",t]})]}),e.jsx("button",{onClick:()=>J(t),className:"hover:opacity-70 transition-opacity",children:e.jsx(Y,{className:"w-3.5 h-3.5",style:{color:"var(--color-text-muted)"}})})]},t))}),i.length<3&&e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{value:w,onChange:t=>D(t.target.value),onKeyDown:t=>t.key==="Enter"&&R(),placeholder:"@handle",className:"flex-1 px-2.5 py-2 rounded-lg text-[12px] border",style:{background:"var(--color-bg)",borderColor:"var(--color-border-subtle)",color:"var(--color-text)"}}),e.jsxs("button",{onClick:R,disabled:!w.trim(),className:"px-3 py-2 text-[12px] rounded-lg disabled:opacity-40 font-medium flex items-center gap-1 hover:opacity-80 transition-opacity",style:{background:"oklch(0.65 0.19 250 / 0.1)",color:"var(--color-primary)"},children:[e.jsx(O,{className:"w-3.5 h-3.5"})," Add"]})]}),i.length>=3&&e.jsx("p",{className:"text-[11px] mt-2",style:{color:"var(--color-text-muted)"},children:"Maximum 3 creators reached"}),e.jsx("div",{className:"mt-2",children:e.jsx(v,{status:m.favouriteCreators})})]}),e.jsxs(x,{title:"Your Products",children:[e.jsx("p",{className:"text-[12px] mb-4",style:{color:"var(--color-text-muted)"},children:"Add your apps, services, or projects so the AI can naturally weave them into posts"}),e.jsx("div",{className:"space-y-2 mb-3",children:N.map(t=>e.jsxs("div",{className:"flex items-start justify-between p-3 rounded-lg",style:{background:"var(--color-bg-secondary)"},children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:"text-[13px] font-semibold",children:t.name}),t.url&&e.jsx("a",{href:t.url,target:"_blank",rel:"noopener",className:"hover:opacity-70 transition-opacity",children:e.jsx(ee,{className:"w-3 h-3",style:{color:"var(--color-text-muted)"}})})]}),t.description&&e.jsx("p",{className:"text-[11px] mt-0.5 truncate",style:{color:"var(--color-text-muted)"},children:t.description})]}),e.jsx("button",{onClick:()=>G(t.id),className:"ml-3 hover:opacity-70 transition-opacity shrink-0",children:e.jsx(Y,{className:"w-3.5 h-3.5",style:{color:"var(--color-text-muted)"}})})]},t.id))}),U?e.jsxs("div",{className:"p-4 rounded-lg border space-y-3",style:{borderColor:"var(--color-border-subtle)",background:"var(--color-bg)"},children:[e.jsx("input",{value:d.name,onChange:t=>y(s=>({...s,name:t.target.value})),placeholder:"Product / App name *",className:"w-full px-2.5 py-2 rounded-lg text-[12px] border",style:{background:"var(--color-bg-secondary)",borderColor:"var(--color-border-subtle)",color:"var(--color-text)"}}),e.jsx("input",{value:d.url,onChange:t=>y(s=>({...s,url:t.target.value})),placeholder:"URL (optional)",className:"w-full px-2.5 py-2 rounded-lg text-[12px] border",style:{background:"var(--color-bg-secondary)",borderColor:"var(--color-border-subtle)",color:"var(--color-text)"}}),e.jsx("textarea",{value:d.description,onChange:t=>y(s=>({...s,description:t.target.value})),placeholder:"Short description (optional)",rows:2,className:"w-full px-2.5 py-2 rounded-lg text-[12px] border resize-none",style:{background:"var(--color-bg-secondary)",borderColor:"var(--color-border-subtle)",color:"var(--color-text)"}}),e.jsxs("div",{className:"flex gap-2 justify-end",children:[e.jsx("button",{onClick:()=>C(!1),className:"px-3 py-1.5 text-[12px] hover:opacity-70 transition-opacity",style:{color:"var(--color-text-secondary)"},children:"Cancel"}),e.jsx("button",{onClick:$,disabled:!d.name.trim(),className:"px-3 py-1.5 text-[12px] rounded-lg font-medium bg-gradient-to-r from-primary to-accent text-white disabled:opacity-40 hover:opacity-90 transition-opacity",children:"Add Product"})]})]}):e.jsxs("button",{onClick:()=>C(!0),className:"flex items-center gap-2 px-3 py-2 text-[12px] rounded-lg border border-dashed hover:opacity-80 transition-opacity w-full justify-center",style:{borderColor:"var(--color-border)",color:"var(--color-text-muted)"},children:[e.jsx(O,{className:"w-3.5 h-3.5"})," Add Product"]}),e.jsx("div",{className:"mt-2",children:e.jsx(v,{status:m.products})})]}),e.jsxs(x,{title:"Writing DNA",children:[e.jsx("p",{className:"text-[12px] mb-4",style:{color:"var(--color-text-muted)"},children:"The tweets you liked/passed during onboarding teach the AI your writing style"}),P.length>0?e.jsx("div",{className:"space-y-2 mb-4 max-h-48 overflow-y-auto",children:P.slice(0,6).map((t,s)=>e.jsxs("div",{className:"flex items-start gap-3 p-2.5 rounded-lg",style:{background:"var(--color-bg-secondary)"},children:[e.jsx("span",{className:`text-[11px] font-semibold shrink-0 mt-0.5 ${t.liked?"text-success":"text-danger"}`,children:t.liked?"✓ Like":"✗ Pass"}),e.jsx("p",{className:"text-[12px] line-clamp-2",style:{color:"var(--color-text-secondary)"},children:t.text})]},s))}):e.jsxs("div",{className:"text-center py-6 mb-3",children:[e.jsx(L,{className:"w-8 h-8 mx-auto mb-2",style:{color:"var(--color-text-muted)"}}),e.jsx("p",{className:"text-[12px]",style:{color:"var(--color-text-muted)"},children:"No Writing DNA captured yet"})]}),e.jsxs("button",{onClick:()=>c("/onboarding?step=2"),className:"flex items-center gap-2 px-4 py-2 text-[13px] font-medium rounded-lg border hover:opacity-80 transition-opacity",style:{borderColor:"var(--color-border)",color:"var(--color-text-secondary)"},children:[e.jsx(L,{className:"w-3.5 h-3.5"}),"Redo Writing DNA",e.jsx(te,{className:"w-3.5 h-3.5 ml-auto"})]})]})]})}export{ne as default};
